<!DOCTYPE html>
<html>

<head>
    <title></title>
    <style type="text/css">
    html,
    body {
        height: 100%;
        margin: 0px;
    }
    </style>
</head>

<body style="height:100%;">
    <div id="container" onclick="changeColor();" style="widht:100%; height:100%; background-color:rgb(204, 102, 0);">
        click to change color
        <div>标题：<span id="title"></span></div>
    </div>
    <script type="text/javascript">
    var container = document.getElementById('container');

    window.addEventListener('message', function(e) {
        if (e.source != window.parent) return;
        document.querySelector('#title').innerHTML = e.data;
        var color = container.style.backgroundColor;
        window.parent.postMessage(color, '*'); //初始化向父级传送消息
    }, false);

    function changeColor() {
        var color = container.style.backgroundColor;
        if (color == 'rgb(204, 102, 0)') {
            color = 'rgb(204, 204, 0)';
        } else {
            color = 'rgb(204,102,0)';
        }
        container.style.backgroundColor = color;
        window.parent.postMessage(color, '*');
    }
    </script>
</body>

</html>
